# Chat Page - 聊天页面

## 概述
该页面提供用户之间的实时聊天功能，包括发送、接收消息和消息历史查看。用户可以看到消息的发送时间、读取状态以及参与聊天的用户信息。

## 页面功能

### 数据模型 (`data`)
- `currentUserId`: 当前登录用户的唯一标识。
- `chatUserId`: 聊天对象的用户唯一标识。
- `chatUserInfo`: 聊天对象的用户信息。
- `currentUserInfo`: 当前用户的信息。
- `messageList`: 聊天记录列表。
- `inputContent`: 输入框中的内容。
- `watcher`: 用于监听实时数据库变更的watcher对象。
- `scrollIntoView`: 当前需要滚动到视图中的消息ID。

### 主要方法和逻辑

#### 页面加载 (`onLoad`)
- 获取聊天对象的用户ID并验证。
- 获取当前用户的`openid`。
- 加载双方的用户信息。
- 初始化消息监听器。
- 标记已接收的消息为已读。

#### 用户信息获取 (`getUserInfo`)
- 通过`openid`查询并设置用户信息。

#### 消息监听 (`initWatcher`)
- 监听消息集合中的变更，包括消息的添加和初始化。

#### 消息变更处理 (`onChange`)
- 处理新接收的消息，更新消息列表，并滚动到最新消息。

#### 发送消息 (`onSendMessage`)
- 验证消息内容不为空。
- 可选的内容安全检查。
- 发送消息到数据库并更新界面。

#### 滚动到最新消息 (`scrollToBottom`)
- 更新`scrollIntoView`使视图滚动到最新的消息。

## 页面结构
- **聊天头部**：显示聊天对象的昵称和头像。
- **消息列表**：显示双方的聊天记录，包括每条消息的发送者、内容、发送时间及读取状态。
- **输入区域**：包含一个输入框和发送按钮，用于输入和发送消息。