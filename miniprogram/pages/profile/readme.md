# 微信小程序 - 用户个人资料页面

## 概述
该页面为用户提供了个人信息的展示与管理功能，用户可以查看自己的昵称、个性签名、头像等信息，查看和管理合作评价和组队招募信息。同时，用户可以编辑个人头像，并与其他用户进行私信交流或互相评价。

## 功能详情

### 1. 用户信息展示
- 展示用户的头像、昵称、个性签名和背景图片。
- 用户可以点击头像更换新的头像。

### 2. 标签页切换
- 页面包含两个标签页：**合作评价** 和 **组队招募**，用户可以自由切换。
- **合作评价**：展示其他用户对当前用户的评价。
- **组队招募**：展示当前用户发布的组队招募信息。

### 3. 合作评价
- 展示用户收到的合作评价信息，包括评价者头像、姓名、评价内容和时间。

### 4. 组队招募
- 展示用户发布的组队招募信息，包括发布者头像、招募标题和发布时间。

### 5. 头像选择
- 用户可以从预设的头像中选择新的头像，并将其设置为个人头像。

### 6. 私信与评价功能
- 用户可以点击相应按钮与其他用户私信交流或对其进行评价。

## 数据结构

### 1. 用户信息 (`users` 集合)
- `name` (String): 用户昵称
- `signature` (String): 用户个性签名
- `avatarUrl` (String): 用户头像 URL
- `backgroundUrl` (String): 背景图片 URL
- `userOpenid` (String): 用户的 OpenID

### 2. 合作评价 (`cooperationReviews` 集合)
- `reviewerOpenid` (String): 评价者的 OpenID
- `targetOpenid` (String): 被评价者的 OpenID
- `content` (String): 评价内容
- `time` (Date): 评价时间
- `ratingText` (String): 评价的评分或简评

### 3. 组队招募 (`recruitmentPosts` 集合)
- `openid` (String): 发布者的 OpenID
- `title` (String): 招募信息标题
- `time` (Date): 招募信息发布时间

## 主要方法

### 1. `onLoad(options)`
- **功能**：页面加载时调用，用于初始化页面，加载用户信息及对应标签的数据。
- **逻辑**：
  - 获取用户的 OpenID，并加载用户基本信息。
  - 根据页面选项或用户选择，加载合作评价或组队招募信息。

### 2. `loadUserInfo(userOpenid)`
- **功能**：从数据库加载用户的基本信息。
- **逻辑**：
  - 通过用户的 OpenID 从数据库中获取用户数据，更新页面展示的用户昵称、头像、个性签名等。

### 3. `switchTab(e)`
- **功能**：切换标签页，加载对应的数据。
- **逻辑**：
  - 通过标签页切换事件，设置当前的标签索引（`tabIndex`），并根据索引加载合作评价或组队招募数据。

### 4. `fetchCooperationReviewsData()`
- **功能**：获取当前用户的合作评价数据。
- **逻辑**：
  - 从 `cooperationReviews` 集合中查询目标用户的所有评价数据，并更新页面显示。

### 5. `fetchTeamRecruitmentsData(userOpenid)`
- **功能**：获取当前用户发布的组队招募数据。
- **逻辑**：
  - 从 `recruitmentPosts` 集合中根据用户 OpenID 查询发布的组队招募信息，更新页面显示。


### 7. `openChat()`
- **功能**：点击后跳转到聊天页面，用户可以通过私信与他人沟通。
- **逻辑**：
  - 获取目标用户的 OpenID，跳转到私信页面。

### 8. `openEvaluation()`
- **功能**：点击后跳转到评价页面，用户可以对他人进行评价。
- **逻辑**：
  - 获取目标用户的 OpenID，跳转到评价页面。

## 页面结构

### 1. 个人资料展示区域
- **头像**：用户头像，点击后可以选择新的头像。
- **昵称**：用户的昵称。
- **个性签名**：展示用户的个性签名。

### 2. 标签页区域
- **合作评价标签**：用户点击后可以查看收到的合作评价。
- **组队招募标签**：用户点击后可以查看发布的组队招募信息。

### 3. 内容展示区域
- **合作评价列表**：展示每个评价的评价者头像、姓名、评价内容及时间。
- **组队招募列表**：展示每个招募信息的发布者头像、招募标题及发布时间。

### 4. 底部浮动按钮
- **评价按钮**：点击后跳转到评价页面。
- **私信按钮**：点击后跳转到聊天页面，用户可以与其他人私信交流。

## 运行说明

1. **首次进入页面**：用户登录后，页面会根据用户的 OpenID 加载其基本信息及相关数据。
2. **切换标签页**：用户可以在页面上方的标签页中选择查看合作评价或组队招募信息。
3. **头像选择**：用户点击头像可以跳转到头像选择页面，选择并更新新的头像。
4. **私信和评价功能**：点击页面底部的浮动按钮，用户可以跳转到私信或评价页面，与他人互动。
